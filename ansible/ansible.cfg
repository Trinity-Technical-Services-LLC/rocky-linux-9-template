[defaults]
# Inventory: Use a dedicated inventory file (or directory) with proper access controls.
# inventory = become_ask_pass = False

# Roles Path: Search paths for Ansible roles (colon-separated).
# roles_path = <!Note: Set via CLI Parameters>

# Host Key Checking: Enable SSH host key checking to prevent man-in-the-middle attacks.
# Host keys for managed nodes should be pre-loaded in known_hosts (use ssh-keyscan or other means) in production.
host_key_checking = false

# Connection Transport: Use OpenSSH for SSH connections.
# "smart" (the default) may fall back to paramiko on some systems, so we force "ssh" for FIPS compatibility.
transport = ssh

# Retry Files: Disable creation of retry files to avoid leaving sensitive info (like hostnames) on disk.
retry_files_enabled = False

# Disable cowsay output for cleaner, professional logs (no ASCII art).
nocows = True

# Where to stage/execute modules on the managed host
remote_tmp = ~/.ansible/tmp

# Optional: controller-side scratch space
local_tmp  = /var/tmp/.ansible/controller


# Quiet missing-python warnings; uses the best interpreter it finds
interpreter_python = auto_silent

# Misc Settings
display_skipped_hosts = false
stdout_callback = default
ansible_python_interpreter = /usr/bin/python3
force_color = True
callback_result_format = yaml
callback_format_pretty = True

[privilege_escalation]
#
# become_user = become_ask_pass = False

# Privilege Escalation: Configure sudo as the become method for elevating privileges.
become_method = sudo

# Do not prompt for sudo password by default.
become_ask_pass = False


[ssh_connection]
#
ssh_args = -C -o ControlMaster=auto -o ControlPersist=5m

# File Transfer Method: Use SFTP only. This avoids the legacy SCP protocol, which has known security issues.
# Note: RHEL 9's scp now uses SFTP by default due to SCP vulnerabilities like CVE-2020-15778
transfer_method = sftp
scp_if_ssh = False

# Pipelining: Enable pipelining to reduce SSH round-trips (no sudo tty allocation), which speeds up tasks 
# and avoids creating temporary files on remote hosts. **Note:** requires 'requiretty' to be disabled for the Ansible sudo user.
pipelining = True

# Control Path: Define a safe directory for SSH control socket files.
# ~/.ansible/cp ensures sockets are in the user's home (secured by user perms) instead of /tmp.
control_path_dir = ~/.ansible/cp
